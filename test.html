<DOCTYPE html>
  <head>
    <meta charset='utf-8'>
    <title>Speech</title>
    </head>
    <body>
<textarea id="textarea" rows=10 cols=80></textarea>
<script type="text/javascript">

  var recognizing = false;
  var ignore_onend;
  if (!('webkitSpeechRecognition' in window)) {
      upgrade();
    } else {
      var recognition = new webkitSpeechRecognition();
      recognition.continuous = true;
      recognition.interimResults = true;
      recognition.onstart = function() {
        recognizing = true;
        // add visual object that indicate that it is okay to start speaking now
    };
    recognition.onerror = function(event) {
      if (event.error == 'no-speech') {
        ignore_onend = true;
      }
      if (event.error == 'audio-capture') {
        ignore_onend = ture;
      }
  };

    recognition.onened = function() {
      recognizing = false;
      if (ignored_onend) {
        return;
      }

    }
  
  }
  
  </script>
  </body>
<html>
